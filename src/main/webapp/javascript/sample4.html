<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<p>sample4.html</p>
	<ul id='list'>
		<li>1, kildong, hong, 1234</li>
	</ul>
	<script>
		let xht = new XMLHttpRequest(); // 비동기방식처리
		xht.open('get','MOCK_DATA.json'); //호출
		xht.send(); // 보냄
		xht.onload = function(){ // 응답하는이벤트
		//	console.log(JSON.parse(xht.response)); // 결과값출력
									// JSON.paser(); object타입으로변환 자바스크립트객체로변환
		} 
		
		/*
		fetch('MOCK_DATA.json') // 여기의 결과값을  //MOCK_DATAs.json은 없는데도 성공으로 처리하네?
		.then(function(resolve){ // 매개변수로넘김
			console.log('success');
			return resolve.texts(); // 일부러에러발생
			// 출력값 처리중으로 나오기 때문에 text로 변환하여 반환
		}, function(){
			console.log('error')
		})
		.then(function(result){ // then은 메소드인데 매개값을 함수로 받음ㅇㅇ
			console.log('succes', result);
		}, function(error){
			console.log('error', error);
		}) 
		*/
		
		fetch('MOCK_DATA.json')
		.then(resolve =>  // 화살표함수ㅇㅇ 결과값이 하나면 function지우고 {}지울 수 있음
			//여기 실행하다가 예외 발생시 
			resolve.json()) //.json() json타입을 자바스크립트객체로ㅇㅇ 배열로?
		.then(result => { // 매개변수값명은 의미있는 단어로 지정
			console.log(result); 
			//console.log(result[0].id);
			for(let i = 0; i < result.length; i++){
				let li = document.createElement('li');
				
				li.innerText = result[i].id + ', ' + result[i].first_name+ ', ' + result[i].last_name+ ', ' + result[i].salary;
				list.append(li);
			}
		}).catch(error =>{
			// 여기서 예외처리ㅇㅇ
			console.log(error);
		})
		// return 타입 promise 
		// 성공시 첫번째 정의 된 기능 실행, 실패하면 두번째 정의된 기능 실행
		// get방식이면 요청페이지만 넣어주면 결과값ㅇㅇ
		// .then으로 끝없이 처리 가능?
		
	</script>
</body>
</html>